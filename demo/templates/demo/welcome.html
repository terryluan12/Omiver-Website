{% extends 'demo/base.html' %}
{% load static %}

{% block inner_styles %}
  <link rel="stylesheet" href="{% static 'demo/welcome/style.css' %}" />
{% endblock %}

{% block inner_content %}
  {% for page in pages %}
    <div class="carousel-item {% if forloop.first %}active {% endif %}">
      <div id="welcome-left-half" class="section">
        <img class="athlete-pic" src="{% static page.photo_url %}" alt="{{ page.photo_alt }}" />
      </div>
      <div id="welcome-right-half" class="section">
        <button id="back-button" onclick="prevSlide()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.6432 9.23701H3.71022L10.5762 2.69701C10.6702 2.61786 10.747 2.5203 10.8019 2.41035C10.8567 2.30039 10.8885 2.18037 10.8952 2.05767C10.9019 1.93497 10.8834 1.8122 10.8408 1.69693C10.7983 1.58165 10.7326 1.47631 10.6478 1.38739C10.5629 1.29847 10.4608 1.22787 10.3477 1.17992C10.2345 1.13197 10.1128 1.1077 9.98991 1.10861C9.86703 1.10951 9.74565 1.13556 9.63322 1.18516C9.5208 1.23476 9.41972 1.30686 9.33622 1.39701L1.49522 8.86501C1.32725 9.03343 1.19433 9.23348 1.10414 9.45358C1.01395 9.67369 0.968274 9.90948 0.969762 10.1473C0.97125 10.3852 1.01987 10.6204 1.11281 10.8394C1.20574 11.0583 1.34116 11.2567 1.51122 11.423L9.33722 18.877C9.42072 18.9672 9.5218 19.0393 9.63422 19.0889C9.74664 19.1385 9.86803 19.1645 9.99091 19.1654C10.1138 19.1663 10.2355 19.142 10.3487 19.0941C10.4618 19.0462 10.5639 18.9755 10.6488 18.8866C10.7336 18.7977 10.7993 18.6924 10.8418 18.5771C10.8844 18.4618 10.9029 18.339 10.8962 18.2164C10.8895 18.0937 10.8577 17.9736 10.8029 17.8637C10.748 17.7537 10.6712 17.6562 10.5772 17.577L3.68222 11.037H18.6432C18.8819 11.037 19.1108 10.9422 19.2796 10.7734C19.4484 10.6046 19.5432 10.3757 19.5432 10.137C19.5432 9.89832 19.4484 9.6694 19.2796 9.50061C19.1108 9.33183 18.8819 9.23701 18.6432 9.23701Z" fill="black" stroke="#171717" stroke-width="0.6" />
          </svg>
        </button>

        <span>
          <div>Welcome to</div>
          <img src="{% static 'green_logo.svg' %}" alt="Omiver Logo" />
        </span>

        <span>
          <img class="cartoon-img" src="{% static page.cartoon_url %}" alt="{{ page.cartoon_alt }}" />

          <h2>{{ page.heading }}</h2>
          <p>{{ page.description }}</p>
        </span>
        <button id="next-button" onclick="nextSlide()"><img src="{% static 'next_arrow.svg' %}" /></button>
      </div>
    </div>
  {% endfor %}

  <script>
    let currentSlide = parseInt(sessionStorage.getItem('currentSlide')) || 0
    console.log(`currentSlide is ${currentSlide}`)
    const slides = document.querySelectorAll('.carousel-item')
    
    function showSlide(index) {
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index)
      })
    
      sessionStorage.setItem('currentSlide', index)
    }
    
    function nextSlide() {
      if (currentSlide > 1) {
        window.location.href = '/login'
        return
      }
      currentSlide = currentSlide + 1
      showSlide(currentSlide)
    }
    
    function prevSlide() {
      if (currentSlide < 1) {
        window.location.href = '/'
        return
      }
      currentSlide = currentSlide - 1
      showSlide(currentSlide)
    }
  </script>
{% endblock %}
